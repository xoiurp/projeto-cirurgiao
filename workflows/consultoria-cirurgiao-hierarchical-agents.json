{
  "name": "Consultoria Projeto CirurgiÃ£o - Equipe HierÃ¡rquica",
  "nodes": [
    {
      "id": "chat-trigger",
      "name": "Chat Trigger",
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [240, 300],
      "parameters": {
        "public": true,
        "mode": "hostedChat",
        "authentication": "none",
        "options": {
          "title": "Consultoria Projeto CirurgiÃ£o ðŸ¥",
          "subtitle": "Equipe Completa de Especialistas - SimulaÃ§Ã£o de Consultoria",
          "inputPlaceholder": "Digite sua pergunta ou solicitaÃ§Ã£o...",
          "showWelcomeScreen": true,
          "welcomeMessage": "Bem-vindo Ã  Consultoria do Projeto CirurgiÃ£o! ðŸ‘‹\n\nNossa equipe hierÃ¡rquica estÃ¡ pronta para ajudar:\n\nðŸŽ¯ **NÃ­vel 1:** Product Owner (Ana Paula)\nðŸ‘¨â€ðŸ’¼ **NÃ­vel 2:** Tech Lead (Ricardo)\nâš™ï¸ **NÃ­vel 3:** Backend Senior, DevOps\n\nComo posso ajudÃ¡-lo hoje?"
        }
      }
    },
    {
      "id": "agent-product-owner",
      "name": "Agent: Product Owner (Ana Paula)",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [480, 300],
      "parameters": {
        "promptType": "auto",
        "text": "={{ $json.chatInput }}",
        "hasOutputParser": false,
        "options": {
          "systemMessage": "Como Product Owner sÃªnior especializada em produtos educacionais, vocÃª Ã© responsÃ¡vel pela visÃ£o de produto, estratÃ©gia, roadmap e priorizaÃ§Ã£o do Projeto CirurgiÃ£o.\n\nSeu objetivo Ã© maximizar o valor do produto atravÃ©s de decisÃµes estratÃ©gicas baseadas em dados, gestÃ£o eficaz de backlog e alinhamento com stakeholders.\n\n**IMPORTANTE - DelegaÃ§Ã£o:**\n- Se a pergunta for sobre PRODUTO, ESTRATÃ‰GIA, PRIORIZAÃ‡ÃƒO, ROADMAP, USER STORIES â†’ Responda diretamente\n- Se a pergunta for TÃ‰CNICA (arquitetura, cÃ³digo, infraestrutura) â†’ Use a ferramenta 'tech_lead_agent' para delegar ao Tech Lead\n\n**Seu estilo de resposta:**\n- Profissional e orientado a dados\n- Focado em valor de negÃ³cio\n- Usa frameworks de priorizaÃ§Ã£o (RICE, MoSCoW)\n- Sempre contextualiza decisÃµes com KPIs\n\nFerramentas: Jira/Linear, Figma, Mixpanel, Google Analytics, Miro, Notion, Amplitude."
        }
      }
    },
    {
      "id": "bedrock-model-po",
      "name": "AWS Bedrock: PO Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
      "typeVersion": 1.1,
      "position": [480, 480],
      "parameters": {
        "modelSource": "inferenceProfile",
        "model": {
          "mode": "list",
          "value": "us.anthropic.claude-sonnet-4-5-v2:0"
        },
        "options": {
          "temperature": 0.7,
          "maxTokens": 4096
        }
      },
      "credentials": {
        "aws": {
          "id": "aws-credentials",
          "name": "AWS Account"
        }
      }
    },
    {
      "id": "qdrant-kb-po",
      "name": "Qdrant KB: Product Owner",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [480, 660],
      "parameters": {
        "mode": "retrieve",
        "qdrantCollection": {
          "mode": "list",
          "value": "agentes_cirurgiao"
        },
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "agente",
                "value": "product_owner"
              }
            ]
          }
        },
        "topK": 5
      },
      "credentials": {
        "qdrantApi": {
          "id": "qdrant-credentials",
          "name": "Qdrant Self-Hosted"
        }
      }
    },
    {
      "id": "tool-tech-lead",
      "name": "Tool: Tech Lead Agent",
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [700, 200],
      "parameters": {
        "toolDescription": "Consulta o Tech Lead (Ricardo) para questÃµes tÃ©cnicas, arquiteturais ou de implementaÃ§Ã£o. Use quando a pergunta envolver: arquitetura de sistema, decisÃµes tecnolÃ³gicas, estimativas tÃ©cnicas, coordenaÃ§Ã£o de desenvolvimento, stack tecnolÃ³gico, performance, escalabilidade, ou qualquer questÃ£o que necessite expertise tÃ©cnica profunda.",
        "text": "={{ $json.query }}",
        "hasOutputParser": false,
        "options": {
          "systemMessage": "Como Tech Lead e Arquiteto de Software com 11+ anos de experiÃªncia, vocÃª Ã© responsÃ¡vel pela visÃ£o tÃ©cnica, arquitetura e lideranÃ§a da equipe de desenvolvimento do Projeto CirurgiÃ£o.\n\nSeu objetivo Ã© definir a arquitetura tÃ©cnica, liderar a equipe, tomar decisÃµes tecnolÃ³gicas crÃ­ticas e garantir qualidade e escalabilidade.\n\n**IMPORTANTE - DelegaÃ§Ã£o:**\n- Se a pergunta for sobre BACKEND, APIs, Database â†’ Use 'backend_senior_agent'\n- Se a pergunta for sobre INFRAESTRUTURA, CI/CD, DevOps â†’ Use 'devops_agent'\n- Se for questÃ£o geral de arquitetura ou mÃºltiplas Ã¡reas â†’ Responda vocÃª mesmo e/ou consulte especialistas\n\n**Seu estilo:**\n- DecisÃµes equilibradas: qualidade, performance, custo e time-to-market\n- Baseado em padrÃµes de arquitetura (Clean Architecture, DDD)\n- Sempre considera impacto em todas plataformas (iOS, Android, Web, Backend)\n\nTecnologias: AWS, Cloudflare, Node.js, PostgreSQL, Swift, Kotlin, Next.js, Docker, Terraform."
        }
      }
    },
    {
      "id": "bedrock-model-tech-lead",
      "name": "AWS Bedrock: Tech Lead Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
      "typeVersion": 1.1,
      "position": [700, 380],
      "parameters": {
        "modelSource": "inferenceProfile",
        "model": {
          "mode": "list",
          "value": "us.anthropic.claude-sonnet-4-5-v2:0"
        },
        "options": {
          "temperature": 0.6,
          "maxTokens": 4096
        }
      },
      "credentials": {
        "aws": {
          "id": "aws-credentials",
          "name": "AWS Account"
        }
      }
    },
    {
      "id": "qdrant-kb-tech-lead",
      "name": "Qdrant KB: Tech Lead",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [700, 560],
      "parameters": {
        "mode": "retrieve",
        "qdrantCollection": {
          "mode": "list",
          "value": "agentes_cirurgiao"
        },
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "agente",
                "value": "tech_lead"
              }
            ]
          }
        },
        "topK": 5
      },
      "credentials": {
        "qdrantApi": {
          "id": "qdrant-credentials",
          "name": "Qdrant Self-Hosted"
        }
      }
    },
    {
      "id": "tool-backend-senior",
      "name": "Tool: Backend Senior Agent",
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [920, 100],
      "parameters": {
        "toolDescription": "Consulta o Backend Senior (Rafael) para questÃµes de backend, APIs, database ou arquitetura de servidor. Use para: design de APIs RESTful, modelagem de banco de dados PostgreSQL, otimizaÃ§Ã£o de queries, integraÃ§Ã£o com Cloudflare R2/Stream, implementaÃ§Ã£o de autenticaÃ§Ã£o JWT, Node.js/TypeScript, ou qualquer questÃ£o relacionada ao desenvolvimento backend.",
        "text": "={{ $json.query }}",
        "hasOutputParser": false,
        "options": {
          "systemMessage": "Como Desenvolvedor Backend SÃªnior especializado em Node.js e arquitetura de sistemas educacionais, vocÃª Ã© fundamental na construÃ§Ã£o da infraestrutura robusta e escalÃ¡vel do Projeto CirurgiÃ£o.\n\nSeu objetivo Ã© desenvolver e manter toda a camada backend garantindo performance, seguranÃ§a e escalabilidade.\n\nUtilize seu conhecimento em Node.js, TypeScript, PostgreSQL, Redis e Cloudflare (R2, Stream) para arquitetar e implementar APIs robustas. Aplique Clean Architecture e SOLID.\n\n**Seu estilo:**\n- CÃ³digo limpo e bem documentado\n- APIs RESTful seguindo best practices\n- Foco em performance e otimizaÃ§Ã£o de queries\n- SeguranÃ§a em primeiro lugar (JWT, validaÃ§Ã£o, sanitizaÃ§Ã£o)\n\nTecnologias: Node.js, TypeScript, Express, PostgreSQL, Prisma ORM, Redis, Cloudflare R2/Stream, JWT, Jest."
        }
      }
    },
    {
      "id": "bedrock-model-backend",
      "name": "AWS Bedrock: Backend Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
      "typeVersion": 1.1,
      "position": [920, 280],
      "parameters": {
        "modelSource": "inferenceProfile",
        "model": {
          "mode": "list",
          "value": "us.anthropic.claude-sonnet-4-5-v2:0"
        },
        "options": {
          "temperature": 0.5,
          "maxTokens": 4096
        }
      },
      "credentials": {
        "aws": {
          "id": "aws-credentials",
          "name": "AWS Account"
        }
      }
    },
    {
      "id": "qdrant-kb-backend",
      "name": "Qdrant KB: Backend Senior",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [920, 460],
      "parameters": {
        "mode": "retrieve",
        "qdrantCollection": {
          "mode": "list",
          "value": "agentes_cirurgiao"
        },
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "agente",
                "value": "backend_senior"
              }
            ]
          }
        },
        "topK": 5
      },
      "credentials": {
        "qdrantApi": {
          "id": "qdrant-credentials",
          "name": "Qdrant Self-Hosted"
        }
      }
    },
    {
      "id": "tool-devops",
      "name": "Tool: DevOps Agent",
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [920, 620],
      "parameters": {
        "toolDescription": "Consulta DevOps (Carolina) para questÃµes de infraestrutura, CI/CD, deploy ou cloud. Use para: configuraÃ§Ã£o de AWS/Cloudflare, pipelines de CI/CD, Docker/containers, Terraform (IaC), monitoramento com Grafana/CloudWatch, gestÃ£o de backups, seguranÃ§a de infraestrutura, otimizaÃ§Ã£o de custos cloud, ou troubleshooting de problemas de infraestrutura.",
        "text": "={{ $json.query }}",
        "hasOutputParser": false,
        "options": {
          "systemMessage": "Como Engenheira DevOps especializada em AWS e Cloudflare, vocÃª Ã© responsÃ¡vel por toda infraestrutura, automaÃ§Ã£o e confiabilidade do Projeto CirurgiÃ£o.\n\nSeu objetivo Ã© construir e manter infraestrutura cloud robusta, automatizar processos de deploy e garantir confiabilidade do sistema.\n\nUtilize seu conhecimento em AWS (EC2, RDS, S3, CloudFront), Cloudflare (R2, Stream, Workers), Docker, GitHub Actions e Terraform para criar IaC reproduzÃ­vel e escalÃ¡vel.\n\n**Seu estilo:**\n- Infraestrutura como cÃ³digo (IaC)\n- AutomaÃ§Ã£o completa de CI/CD\n- Monitoramento proativo e alertas\n- SeguranÃ§a e compliance\n- OtimizaÃ§Ã£o de custos\n\nMetas: uptime >99.9%, deploy <15min, custos otimizados.\n\nTecnologias: AWS, Cloudflare, Docker, GitHub Actions, Terraform, Nginx, PostgreSQL, Redis, Grafana, CloudWatch."
        }
      }
    },
    {
      "id": "bedrock-model-devops",
      "name": "AWS Bedrock: DevOps Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatAwsBedrock",
      "typeVersion": 1.1,
      "position": [920, 800],
      "parameters": {
        "modelSource": "inferenceProfile",
        "model": {
          "mode": "list",
          "value": "us.anthropic.claude-sonnet-4-5-v2:0"
        },
        "options": {
          "temperature": 0.5,
          "maxTokens": 4096
        }
      },
      "credentials": {
        "aws": {
          "id": "aws-credentials",
          "name": "AWS Account"
        }
      }
    },
    {
      "id": "qdrant-kb-devops",
      "name": "Qdrant KB: DevOps",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [920, 980],
      "parameters": {
        "mode": "retrieve",
        "qdrantCollection": {
          "mode": "list",
          "value": "agentes_cirurgiao"
        },
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "agente",
                "value": "devops"
              }
            ]
          }
        },
        "topK": 5
      },
      "credentials": {
        "qdrantApi": {
          "id": "qdrant-credentials",
          "name": "Qdrant Self-Hosted"
        }
      }
    }
  ],
  "connections": {
    "chat-trigger": {
      "main": [
        [
          {
            "node": "agent-product-owner",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "agent-product-owner": {
      "ai_languageModel": [
        [
          {
            "node": "bedrock-model-po",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ],
      "ai_memory": [
        [
          {
            "node": "qdrant-kb-po",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ],
      "ai_tool": [
        [
          {
            "node": "tool-tech-lead",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "tool-tech-lead": {
      "ai_languageModel": [
        [
          {
            "node": "bedrock-model-tech-lead",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ],
      "ai_memory": [
        [
          {
            "node": "qdrant-kb-tech-lead",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ],
      "ai_tool": [
        [
          {
            "node": "tool-backend-senior",
            "type": "ai_tool",
            "index": 0
          },
          {
            "node": "tool-devops",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "tool-backend-senior": {
      "ai_languageModel": [
        [
          {
            "node": "bedrock-model-backend",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ],
      "ai_memory": [
        [
          {
            "node": "qdrant-kb-backend",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "tool-devops": {
      "ai_languageModel": [
        [
          {
            "node": "bedrock-model-devops",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ],
      "ai_memory": [
        [
          {
            "node": "qdrant-kb-devops",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": ""
  },
  "staticData": null,
  "tags": [
    {
      "name": "AI Agents",
      "id": "ai-agents"
    },
    {
      "name": "Consultoria",
      "id": "consultoria"
    },
    {
      "name": "Hierarquia",
      "id": "hierarquia"
    }
  ],
  "meta": {
    "instanceId": "self-hosted"
  },
  "pinData": {},
  "versionId": "2.0.0"
}
